{% extends 'ecommerce/base.html' %}
{% load crispy_forms_tags %}
{% load static %}

{% block body %}
<body>
<section class="section-conten padding-y" style="min-height:84vh">
	<div class="card mx-auto " style="max-width: 500px; margin-top:100px; ">
      <div class="card-body ">
      <h4 class="card-title mb-5">Alteração de senha</h4>
      <form  method="POST" autocomplete="off" >
          {% csrf_token %}
          <div class="form-group">
              {{ form|crispy }}
          </div>
          <div class="form-group">
              <button type="submit" class="btn btn-primary btn-block">Salvar</button>
          </div>
      </form>
      </div>
    </div>
</section>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
</body>

	{% if messages %}
		{% for m in messages %}
			<li {% if m.tags %} class="{{ m.tags }}"{% endif %}>{{ m }}</li>
		<script>
				const Toast = Swal.mixin({
				  toast: true,
				  position: 'center',
				  showConfirmButton: true,
				  timer: 5000,
				  timerProgressBar: true,
				  didOpen: (toast) => {
					toast.addEventListener('mouseenter', Swal.stopTimer)
					toast.addEventListener('mouseleave', Swal.resumeTimer)
				  }
				})

				Toast.fire({
				  icon: 'success',
				  title: '{{m}} \n Clique no botão OK para prosseguir'
				}).then((result) => {
				  if (result.isConfirmed) {
						window.location.href = "{% url 'e-commerce:perfil_principal' %}";
				  }
				})
		  </script>
		 {{ m }}
		{% endfor %}
	{% endif %}
{% endblock %}